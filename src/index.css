@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

/* Perfect Image Edge Blending */
.hero-image-container {
  background-color: #ffffff !important;
  isolation: isolate;
  position: relative;
}

.hero-image-container img {
  background-color: #ffffff !important;
  mix-blend-mode: normal !important;
  isolation: isolate !important;
  image-rendering: auto !important;
  object-fit: contain !important;
  object-position: center !important;
}

/* Edge blending overlays */
.edge-blend-top {
  background: linear-gradient(to bottom, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%) !important;
}

.edge-blend-bottom {
  background: linear-gradient(to top, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%) !important;
}

.edge-blend-left {
  background: linear-gradient(to right, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%) !important;
}

.edge-blend-right {
  background: linear-gradient(to left, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%) !important;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 11%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 11%;

    --primary: 220 90% 56%;
    --primary-foreground: 0 0% 100%;
    --primary-glow: 220 90% 66%;

    --secondary: 0 0% 98%;
    --secondary-foreground: 0 0% 11%;

    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 46%;

    --accent: 160 84% 39%;
    --accent-foreground: 0 0% 100%;
    --accent-glow: 160 84% 49%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 92%;
    --input: 0 0% 92%;
    --ring: 220 90% 56%;

    --radius: 0.125rem;

    /* Premium Gradients */
    --gradient-primary: linear-gradient(135deg, hsl(220 90% 56%), hsl(220 90% 66%));
    --gradient-accent: linear-gradient(135deg, hsl(160 84% 39%), hsl(160 84% 49%));
    --gradient-subtle: linear-gradient(180deg, hsl(0 0% 100%), hsl(0 0% 98%));
    --gradient-dark: linear-gradient(135deg, hsl(0 0% 11%), hsl(0 0% 20%));

    /* Elegant Shadows */
    --shadow-elegant: 0 10px 30px -10px hsl(220 90% 56% / 0.2);
    --shadow-glow: 0 0 40px hsl(220 90% 66% / 0.3);
    --shadow-lift: 0 20px 60px -15px hsl(0 0% 0% / 0.3);
    --shadow-card: 0 4px 20px hsl(0 0% 0% / 0.08);

    /* Transitions */
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-bounce: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);

    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 0 0% 11%;
    --sidebar-primary: 0 0% 0%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 0 0% 96%;
    --sidebar-accent-foreground: 0 0% 0%;
    --sidebar-border: 0 0% 92%;
    --sidebar-ring: 0 0% 11%;
  }

  .dark {
    --background: 0 0% 11%;
    --foreground: 0 0% 98%;

    --card: 0 0% 11%;
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 11%;
    --popover-foreground: 0 0% 98%;

    --primary: 220 90% 66%;
    --primary-foreground: 0 0% 11%;
    --primary-glow: 220 90% 76%;

    --secondary: 0 0% 17%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 17%;
    --muted-foreground: 0 0% 65%;

    --accent: 160 84% 49%;
    --accent-foreground: 0 0% 11%;
    --accent-glow: 160 84% 59%;

    --destructive: 0 63% 31%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 17%;
    --input: 0 0% 17%;
    --ring: 220 90% 66%;

    /* Premium Gradients - Dark Mode */
    --gradient-primary: linear-gradient(135deg, hsl(220 90% 66%), hsl(220 90% 76%));
    --gradient-accent: linear-gradient(135deg, hsl(160 84% 49%), hsl(160 84% 59%));
    --gradient-subtle: linear-gradient(180deg, hsl(0 0% 11%), hsl(0 0% 17%));
    --gradient-dark: linear-gradient(135deg, hsl(0 0% 8%), hsl(0 0% 15%));

    /* Elegant Shadows - Dark Mode */
    --shadow-elegant: 0 10px 30px -10px hsl(220 90% 66% / 0.3);
    --shadow-glow: 0 0 40px hsl(220 90% 76% / 0.4);
    --shadow-lift: 0 20px 60px -15px hsl(0 0% 0% / 0.6);
    --shadow-card: 0 4px 20px hsl(0 0% 0% / 0.3);

    --sidebar-background: 0 0% 10%;
    --sidebar-foreground: 0 0% 96%;
    --sidebar-primary: 0 0% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 0 0% 16%;
    --sidebar-accent-foreground: 0 0% 96%;
    --sidebar-border: 0 0% 16%;
    --sidebar-ring: 0 0% 59%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    overflow-x: hidden;
    overflow-y: scroll;
    height: 100%;
    /* CRITICAL: Enable momentum scrolling on iOS */
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: auto;
    /* Performance optimizations for smoother scrolling */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    /* Enable hardware acceleration */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }

  /* ============ Lenis Smooth Scroll Optimizations ============ */

  /* Remove default scroll behavior to let Lenis handle it */
  html.lenis,
  html.lenis body {
    height: auto;
  }

  .lenis.lenis-smooth {
    scroll-behavior: auto !important;
  }

  .lenis.lenis-smooth [data-lenis-prevent] {
    overscroll-behavior: contain;
  }

  .lenis.lenis-stopped {
    overflow: hidden;
  }

  .lenis.lenis-scrolling iframe {
    pointer-events: none;
  }

  /* ============ Performance Optimizations ============ */

  /* GPU acceleration for common animated elements */
  .motion-div,
  .hover-effect,
  [class*="hover:"],
  [class*="group-hover:"] {
    will-change: transform;
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }

  /* Optimize images for smooth scrolling */
  img {
    will-change: transform;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }

  /* Optimize product cards and interactive elements */
  .product-card,
  [class*="card"],
  button,
  a {
    will-change: transform, opacity;
    backface-visibility: hidden;
  }

  /* Disable will-change after animations complete */
  .motion-div:not(:hover),
  .hover-effect:not(:hover) {
    will-change: auto;
  }

  /* ============ Scroll-based Animations & Parallax ============ */

  .scroll-fade-in {
    opacity: 0;
    transform: translateY(20px) translateZ(0);
    backface-visibility: hidden;
  }

  body {
    @apply bg-background text-foreground;
    font-family: "Helvetica Neue", Avenir, Arial, sans-serif;
    font-weight: 300;
    letter-spacing: 0.08em;
    /* overflow-x: hidden; REMOVED to prevent implicit overflow-y: auto */
    /* overflow-y: visible; */
    width: 100%;
    min-height: 100%;
    -webkit-overflow-scrolling: touch;
    /* CRITICAL: Enable momentum scrolling on iOS */
    overflow-y: scroll;
    overscroll-behavior-y: auto;
    margin: 0;
    padding: 0;
    /* Performance optimizations for smoother scrolling */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    /* Enable hardware acceleration */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    perspective: 1000px;
  }

  #root {
    width: 100%;
    min-height: 100vh;
    /* Performance optimizations */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-weight: 300;
    letter-spacing: 0.12em;
    text-transform: uppercase;
  }
}

@layer utilities {
  .text-elegant {
    font-weight: 300;
    letter-spacing: 0.12em;
    text-transform: uppercase;
  }

  .hover-lift {
    transition: var(--transition-smooth);
  }

  .hover-lift:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-lift);
    will-change: transform;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--border)) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: hsl(var(--border));
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: hsl(var(--primary) / 0.5);
  }

  .gradient-border {
    position: relative;
    background: linear-gradient(var(--background), var(--background)) padding-box,
      var(--gradient-primary) border-box;
    border: 2px solid transparent;
  }

  .glassmorphism {
    background: hsl(var(--background) / 0.8);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    /* Performance optimization */
    will-change: transform, backdrop-filter;
    transform: translateZ(0);
  }

  .text-gradient {
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .shadow-elegant {
    box-shadow: var(--shadow-elegant);
  }

  .shadow-glow {
    box-shadow: var(--shadow-glow);
  }

  .shadow-card {
    box-shadow: var(--shadow-card);
  }

  .magnetic-hover {
    transition: var(--transition-bounce);
  }

  .magnetic-hover:hover {
    transform: scale(1.05);
    will-change: transform;
  }

  .ripple {
    position: relative;
    overflow: hidden;
  }

  .ripple::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at center, hsl(var(--primary) / 0.3) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.3s;
  }

  .ripple:active::after {
    opacity: 1;
  }

  /* Prevent horizontal scrolling */
  .no-horizontal-scroll {
    overflow-x: hidden !important;
    max-width: 100vw;
  }

  .scroll-vertical-only {
    overflow-x: hidden;
    overflow-y: auto;
  }

  /* Ensure all containers don't cause horizontal overflow */
  .container {
    max-width: 100%;
    width: 100%;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  /* Prevent horizontal overflow globally */
  * {
    max-width: 100%;
  }

  /* Allow specific elements to overflow when needed */
  img,
  video,
  svg {
    max-width: 100%;
    height: auto;
  }

  /* Ensure flex containers don't overflow */
  .flex {
    min-width: 0;
  }

  /* Ensure grid containers don't overflow */
  .grid {
    min-width: 0;
  }

  /* Fix scroll conflicts on touch devices */
  button,
  a,
  [role="button"] {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    user-select: none;
    -webkit-user-select: none;
  }

  /* Allow text selection on specific elements */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p,
  span,
  div[class*="description"],
  div[class*="text"] {
    user-select: text;
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
  }

  /* Ensure smooth scrolling even when touching text */
  * {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  }

  /* Prevent tap delay on mobile */
  a,
  button,
  input,
  select,
  textarea {
    -ms-touch-action: manipulation;
    touch-action: manipulation;
  }

  /* Smooth scrolling for touch devices */
  * {
    -webkit-overflow-scrolling: touch;
  }

  /* CRITICAL: Enable vertical scrolling and momentum on mobile - fixes scroll freeze issue */
  @media (max-width: 768px) {
    html, body, #root {
      touch-action: pan-y pan-x pinch-zoom !important;
      -webkit-overflow-scrolling: touch !important;
      overscroll-behavior-y: auto !important;
      overflow-y: scroll !important;
      -webkit-touch-callout: none !important;
      -webkit-user-select: none !important;
      user-select: none !important;
    }
    
    /* Allow text selection on specific elements */
    h1, h2, h3, h4, h5, h6, p, span, div[class*="description"], div[class*="text"] {
      -webkit-user-select: text !important;
      user-select: text !important;
    }
    
    /* Ensure main content areas allow vertical scrolling with momentum */
    main, section, article, .page-content {
      touch-action: pan-y pan-x pinch-zoom !important;
      -webkit-overflow-scrolling: touch !important;
      overscroll-behavior-y: auto !important;
    }
    
    /* Allow horizontal scrolling only on carousels */
    .carousel, [data-embla], .embla {
      touch-action: pan-x pan-y !important;
    }
    
    /* Fix scroll freezing on all interactive elements */
    button, a, input, select, textarea {
      touch-action: manipulation !important;
      -webkit-tap-highlight-color: transparent !important;
    }
    
    /* Ensure images don't block scroll */
    img {
      touch-action: pan-y pan-x pinch-zoom !important;
      pointer-events: auto !important;
    }
    
    /* Prevent scroll interruption on motion components */
    [data-framer-component], .motion-div {
      touch-action: pan-y pan-x pinch-zoom !important;
    }
  }

  /* Prevent scroll interruption when clicking */
  .prevent-scroll-interrupt {
    pointer-events: auto;
    touch-action: manipulation;
  }

  /* Optimize motion components for touch */
  [data-framer-component] {
    touch-action: manipulation;
  }

  /* Smooth scroll utilities */
  .scroll-smooth-section {
    will-change: transform;
    transform: translateZ(0);
  }

  /* Parallax utility classes */
  .parallax-slow {
    will-change: transform;
    transform: translateZ(0);
  }

  .parallax-medium {
    will-change: transform;
    transform: translateZ(0);
  }

  .parallax-fast {
    will-change: transform;
    transform: translateZ(0);
  }

  /* Fixed viewport centering for dialogs - Force viewport positioning */
  .viewport-centered-dialog {
    position: fixed !important;
    top: 50vh !important;
    left: 50vw !important;
    transform: translate(-50%, -50%) !important;
    max-height: 90vh !important;
    margin: 0 !important;
    z-index: 9999 !important;
  }

  /* Ensure dialog overlay is also viewport-fixed */
  [data-radix-dialog-overlay] {
    position: fixed !important;
    inset: 0 !important;
    z-index: 9998 !important;
  }

  /* Mobile responsive for viewport-centered dialogs */
  @media (max-width: 640px) {
    .viewport-centered-dialog {
      width: calc(100vw - 2rem) !important;
      max-width: 500px !important;
      left: 50vw !important;
      top: 50vh !important;
    }
  }

  /* Prevent body scroll when dialog is open */
  body:has([data-radix-dialog-content]) {
    overflow: hidden !important;
  }
}